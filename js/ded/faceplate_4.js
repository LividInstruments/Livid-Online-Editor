
window.onload = function () {
	//get the url parameters if any. We can use these to color and select items. The "mode" var MUST be first in the list.
	//For example, 
	//ending with ?mode=warn&btn=5 will blink btn_5 with warn color
	//ending with ?mode=on&enc=10 will turn enc_10 on with on color
	var urlparams = {};
	if (location.search) {
		var parts = location.search.substring(1).split('&');
		for (var i = 0; i < parts.length; i++) {
			var nv = parts[i].split('=');
			if (!nv[0]) continue;
			urlparams[nv[0]] = nv[1] || true;
		}
	}
	
	//setup the Rafael graphics:
	var R = Raphael("paper", 647, 359);
	var color_off="#FFF";//white
	var color_stroke="#000";//black
	var color_over="#3198CB";//blue
	var color_on="#40BD48";//green
	//var color_warn="#F2D113";//yellow
	var color_warn="#E8300C";//red
	var attr = {
		alpha: 0.5,
		fill: color_off,
		"fill-opacity": 0.0,
		stroke: color_stroke,
		"stroke-opacity": 0.0,
		"stroke-width": 1,
		"stroke-linejoin": "round"
	};
	
	//paths and properties for each control item:
	var controller={
	//ledring
	"ledring_31" : R.path("M621.003,272.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C621.364,271.231,621.003,271.729,621.003,272.399z").attr(attr),
	"ledring_30" : R.path("M621.003,200.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C621.364,199.231,621.003,199.729,621.003,200.399z").attr(attr),
	"ledring_29" : R.path("M621.003,128.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C621.364,127.231,621.003,127.729,621.003,128.399z").attr(attr),
	"ledring_28" : R.path("M621.003,56.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C621.364,55.231,621.003,55.729,621.003,56.399z").attr(attr),
	"ledring_27" : R.path("M549.003,272.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C549.364,271.231,549.003,271.729,549.003,272.399z").attr(attr),
	"ledring_26" : R.path("M549.003,200.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C549.364,199.231,549.003,199.729,549.003,200.399z").attr(attr),
	"ledring_25" : R.path("M549.003,128.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C549.364,127.231,549.003,127.729,549.003,128.399z").attr(attr),
	"ledring_24" : R.path("M549.003,56.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C549.364,55.231,549.003,55.729,549.003,56.399z").attr(attr),
	"ledring_23" : R.path("M477.081,272.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C477.442,271.231,477.081,271.729,477.081,272.399z").attr(attr),
	"ledring_22" : R.path("M477.081,200.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C477.442,199.231,477.081,199.729,477.081,200.399z").attr(attr),
	"ledring_21" : R.path("M477.081,128.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C477.442,127.231,477.081,127.729,477.081,128.399z").attr(attr),
	"ledring_20" : R.path("M477.081,56.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C477.442,55.231,477.081,55.729,477.081,56.399z").attr(attr),
	"ledring_19" : R.path("M405.003,272.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C405.364,271.231,405.003,271.729,405.003,272.399z").attr(attr),
	"ledring_18" : R.path("M405.003,200.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C405.364,199.231,405.003,199.729,405.003,200.399z").attr(attr),
	"ledring_17" : R.path("M405.003,128.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C405.364,127.231,405.003,127.729,405.003,128.399z").attr(attr),
	"ledring_16" : R.path("M405.003,56.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C405.364,55.231,405.003,55.729,405.003,56.399z").attr(attr),
	"ledring_15" : R.path("M333.003,272.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C333.364,271.231,333.003,271.729,333.003,272.399z").attr(attr),
	"ledring_14" : R.path("M333.003,200.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C333.364,199.231,333.003,199.729,333.003,200.399z").attr(attr),
	"ledring_13" : R.path("M333.003,128.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C333.364,127.231,333.003,127.729,333.003,128.399z").attr(attr),
	"ledring_12" : R.path("M333.003,56.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C333.364,55.231,333.003,55.729,333.003,56.399z").attr(attr),
	"ledring_11" : R.path("M261.003,272.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C261.364,271.231,261.003,271.729,261.003,272.399z").attr(attr),
	"ledring_10" : R.path("M261.003,200.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C261.364,199.231,261.003,199.729,261.003,200.399z").attr(attr),
	"ledring_9" : R.path("M261.003,128.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C261.364,127.231,261.003,127.729,261.003,128.399z").attr(attr),
	"ledring_8" : R.path("M261.003,56.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C261.364,55.231,261.003,55.729,261.003,56.399z").attr(attr),
	"ledring_7" : R.path("M189.003,272.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C189.364,271.231,189.003,271.729,189.003,272.399z").attr(attr),
	"ledring_6" : R.path("M189.003,200.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C189.364,199.231,189.003,199.729,189.003,200.399z").attr(attr),
	"ledring_5" : R.path("M189.003,128.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C189.364,127.231,189.003,127.729,189.003,128.399z").attr(attr),
	"ledring_4" : R.path("M189.003,56.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C189.364,55.231,189.003,55.729,189.003,56.399z").attr(attr),
	"ledring_3" : R.path("M117.003,272.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C117.364,271.231,117.003,271.729,117.003,272.399z").attr(attr),
	"ledring_2" : R.path("M117.003,200.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C117.364,199.231,117.003,199.729,117.003,200.399z").attr(attr),
	"ledring_1" : R.path("M117.003,128.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C117.364,127.231,117.003,127.729,117.003,128.399z").attr(attr),
	"ledring_0" : R.path("M117.003,56.399c0,0.531,0.835,2.592,1.113,3.025c0.33,0.512,0.77,0.719,1.069,0.58c8.997-4.195,15.253-13.493,15.253-24.291c0-14.728-11.641-26.667-26-26.667s-26,11.939-26,26.667c0,10.486,5.9,19.559,14.482,23.914c0.371,0.189,1.039-0.102,1.393-0.463c0.354-0.362,0.744-2.516,0.836-3.187s-0.318-1.091-0.582-1.235c-6.629-3.625-11.139-10.785-11.139-19.029c0-11.901,9.406-21.549,21.01-21.549s21.01,9.647,21.01,21.549c0,8.502-4.799,15.854-11.77,19.359C117.364,55.231,117.003,55.729,117.003,56.399z").attr(attr),
	//btns
	"btn_37" : R.path("M94.756,302h27.365c4.316,0,7.817,3.474,7.817,7.76v27.48c0,4.286-3.501,7.759-7.817,7.759H94.756c-4.317,0-7.817-3.473-7.817-7.759v-27.48C86.938,305.474,90.438,302,94.756,302z").attr(attr),
	"btn_38" : R.path("M166.756,302h27.365c4.316,0,7.817,3.474,7.817,7.76v27.48c0,4.286-3.501,7.759-7.817,7.759h-27.365c-4.317,0-7.817-3.473-7.817-7.759v-27.48C158.938,305.474,162.438,302,166.756,302z").attr(attr),
	"btn_39" : R.path("M238.756,302h27.365c4.316,0,7.817,3.474,7.817,7.76v27.48c0,4.286-3.501,7.759-7.817,7.759h-27.365c-4.317,0-7.817-3.473-7.817-7.759v-27.48C230.938,305.474,234.438,302,238.756,302z").attr(attr),
	"btn_40" : R.path("M310.756,302h27.365c4.316,0,7.817,3.474,7.817,7.76v27.48c0,4.286-3.501,7.759-7.817,7.759h-27.365c-4.317,0-7.817-3.473-7.817-7.759v-27.48C302.938,305.474,306.438,302,310.756,302z").attr(attr),
	"btn_41" : R.path("M382.756,302h27.365c4.316,0,7.817,3.474,7.817,7.76v27.48c0,4.286-3.501,7.759-7.817,7.759h-27.365c-4.317,0-7.817-3.473-7.817-7.759v-27.48C374.938,305.474,378.438,302,382.756,302z").attr(attr),
	"btn_42" : R.path("M453.817,302h27.365c4.316,0,7.817,3.474,7.817,7.76v27.48c0,4.286-3.501,7.759-7.817,7.759h-27.365c-4.317,0-7.817-3.473-7.817-7.759v-27.48C446,305.474,449.5,302,453.817,302z").attr(attr),
	"btn_43" : R.path("M526.756,302h27.365c4.316,0,7.817,3.474,7.817,7.76v27.48c0,4.286-3.501,7.759-7.817,7.759h-27.365c-4.317,0-7.817-3.473-7.817-7.759v-27.48C518.938,305.474,522.438,302,526.756,302z").attr(attr),
	"btn_44" : R.path("M598.756,302h27.365c4.316,0,7.817,3.474,7.817,7.76v27.48c0,4.286-3.501,7.759-7.817,7.759h-27.365c-4.317,0-7.817-3.473-7.817-7.759v-27.48C590.938,305.474,594.438,302,598.756,302z").attr(attr),
	"btn_36" : R.path("M22.217,302h27.365c4.316,0,7.817,3.474,7.817,7.76v27.48c0,4.286-3.501,7.759-7.817,7.759H22.217c-4.317,0-7.817-3.473-7.817-7.759v-27.48C14.4,305.474,17.9,302,22.217,302z").attr(attr),
	"btn_35" : R.path("M22.217,230h27.365c4.316,0,7.817,3.474,7.817,7.76v27.48c0,4.286-3.501,7.759-7.817,7.759H22.217c-4.317,0-7.817-3.473-7.817-7.759v-27.48C14.4,233.474,17.9,230,22.217,230z").attr(attr),
	"btn_34" : R.path("M22.217,158h27.365c4.316,0,7.817,3.474,7.817,7.76v27.48c0,4.286-3.501,7.759-7.817,7.759H22.217c-4.317,0-7.817-3.473-7.817-7.759v-27.48C14.4,161.474,17.9,158,22.217,158z").attr(attr),
	"btn_33" : R.path("M22.217,86h27.365c4.316,0,7.817,3.474,7.817,7.76v27.48c0,4.286-3.501,7.759-7.817,7.759H22.217c-4.317,0-7.817-3.473-7.817-7.759V93.76C14.4,89.474,17.9,86,22.217,86z").attr(attr),
	"btn_32" : R.path("M22.217,14h27.365c4.316,0,7.817,3.474,7.817,7.76v27.48c0,4.286-3.501,7.759-7.817,7.759H22.217C17.9,57,14.4,53.527,14.4,49.241V21.76C14.4,17.474,17.9,14,22.217,14z").attr(attr),
	//btn_led
	"btn_31" : R.circle(612.438, 281.713, 7.5).attr(attr),
	"btn_30" : R.circle(612.438, 211.713, 7.5).attr(attr),
	"btn_29" : R.circle(612.438, 139.713, 7.5).attr(attr),
	"btn_28" : R.circle(612.438, 67.713, 7.5).attr(attr),
	"btn_27" : R.circle(540.438, 283.713, 7.5).attr(attr),
	"btn_26" : R.circle(540.438, 211.713, 7.5).attr(attr),
	"btn_25" : R.circle(540.438, 139.713, 7.5).attr(attr),
	"btn_24" : R.circle(540.438, 67.713, 7.5).attr(attr),
	"btn_23" : R.circle(468.517, 283.713, 7.5).attr(attr),
	"btn_22" : R.circle(468.517, 211.713, 7.5).attr(attr),
	"btn_21" : R.circle(468.517, 139.713, 7.5).attr(attr),
	"btn_20" : R.circle(468.517, 67.713, 7.5).attr(attr),
	"btn_19" : R.circle(396.438, 283.713, 7.5).attr(attr),
	"btn_18" : R.circle(396.438, 211.713, 7.5).attr(attr),
	"btn_17" : R.circle(396.438, 139.713, 7.5).attr(attr),
	"btn_16" : R.circle(396.438, 67.713, 7.5).attr(attr),
	"btn_15" : R.circle(324.438, 283.713, 7.5).attr(attr),
	"btn_14" : R.circle(324.438, 211.713, 7.5).attr(attr),
	"btn_13" : R.circle(324.438, 139.713, 7.5).attr(attr),
	"btn_12" : R.circle(324.438, 67.713, 7.5).attr(attr),
	"btn_11" : R.circle(252.438, 283.713, 7.5).attr(attr),
	"btn_10" : R.circle(252.438, 211.713, 7.5).attr(attr),
	"btn_9" : R.circle(252.438, 139.713, 7.5).attr(attr),
	"btn_8" : R.circle(252.438, 67.713, 7.5).attr(attr),
	"btn_7" : R.circle(180.438, 283.713, 7.5).attr(attr),
	"btn_6" : R.circle(180.438, 211.713, 7.5).attr(attr),
	"btn_5" : R.circle(180.438, 139.713, 7.5).attr(attr),
	"btn_4" : R.circle(180.438, 67.713, 7.5).attr(attr),
	"btn_3" : R.circle(108.438, 283.713, 7.5).attr(attr),
	"btn_2" : R.circle(108.438, 211.713, 7.5).attr(attr),
	"btn_1" : R.circle(108.438, 139.714, 7.5).attr(attr),
	"btn_0" : R.circle(108.438, 67.713, 7.5).attr(attr),
	//encs
	"enc_31" : R.circle(612.438, 251.713, 12.2).attr(attr),
	"enc_30" : R.circle(612.438, 179.713, 12.2).attr(attr),
	"enc_29" : R.circle(612.438, 107.713, 12.2).attr(attr),
	"enc_28" : R.circle(612.438, 35.713, 12.2).attr(attr),
	"enc_27" : R.circle(540.438, 251.713, 12.2).attr(attr),
	"enc_26" : R.circle(540.438, 179.713, 12.2).attr(attr),
	"enc_25" : R.circle(540.438, 107.713, 12.2).attr(attr),
	"enc_24" : R.circle(540.438, 35.713, 12.2).attr(attr),
	"enc_23" : R.circle(468.517, 251.713, 12.2).attr(attr),
	"enc_22" : R.circle(468.517, 179.713, 12.2).attr(attr),
	"enc_21" : R.circle(468.517, 107.713, 12.2).attr(attr),
	"enc_20" : R.circle(468.517, 35.713, 12.2).attr(attr),
	"enc_19" : R.circle(396.438, 251.713, 12.2).attr(attr),
	"enc_18" : R.circle(396.438, 179.713, 12.2).attr(attr),
	"enc_17" : R.circle(396.438, 107.713, 12.2).attr(attr),
	"enc_16" : R.circle(396.438, 35.713, 12.2).attr(attr),
	"enc_15" : R.circle(324.438, 251.713, 12.2).attr(attr),
	"enc_14" : R.circle(324.438, 179.713, 12.2).attr(attr),
	"enc_13" : R.circle(324.438, 107.713, 12.2).attr(attr),
	"enc_12" : R.circle(324.438, 35.713, 12.2).attr(attr),
	"enc_11" : R.circle(252.438, 251.713, 12.2).attr(attr),
	"enc_10" : R.circle(252.438, 179.713, 12.2).attr(attr),
	"enc_9" : R.circle(252.438, 107.713, 12.2).attr(attr),
	"enc_8" : R.circle(252.438, 35.713, 12.2).attr(attr),
	"enc_7" : R.circle(180.438, 251.713, 12.2).attr(attr),
	"enc_6" : R.circle(180.438, 179.713, 12.2).attr(attr),
	"enc_5" : R.circle(180.438, 107.713, 12.2).attr(attr),
	"enc_4" : R.circle(180.438, 35.713, 12.2).attr(attr),
	"enc_3" : R.circle(108.438, 251.713, 12.2).attr(attr),
	"enc_2" : R.circle(108.438, 179.713, 12.2).attr(attr),
	"enc_1" : R.circle(108.438, 107.713, 12.2).attr(attr),
	"enc_0" : R.circle(108.438, 35.713, 12.2).attr(attr)
	}

	var selected = "";
	var current = null;
	var previous = null;
	var last = null;
	
	//draw any warnings or selections dictated by URL variables:
	var mode = "";
	for(var ctl in urlparams){
		var val = urlparams[ctl];
		//log("<br>01ctl: "+ctl+" is "+val);
		if(ctl=="mode"){
			mode=urlparams[ctl];
		}else{
			if(ctl=="led") ctl="btn"; //translate - there's no "led" in the controller object, but they are synonymous in this case.
			var ctlname = ctl+"_"+val;
			if(mode=="warn"){
				controller[ctlname].animate({fill: color_warn, stroke: color_stroke, "fill-opacity": 0.5, "stroke-opacity": 0.5}, 500, function(){
					//hold, then fadeout on callback
					controller[ctlname].animate({fill: color_warn, stroke: color_stroke, "fill-opacity": 1, "stroke-opacity": 1}, 4000, function(){
						controller[ctlname].animate({fill: color_warn, stroke: color_stroke, "fill-opacity": 0., "stroke-opacity": 0.}, 200)
					})			
				});
			}
			if(mode=="on"){
				controller[ctlname].animate({fill: color_on, stroke: color_stroke, "fill-opacity": 0.5, "stroke-opacity": 0.5}, 5);
				selected=ctlname;
				previous = controller[ctlname];
			}
		}
	}
	
	var fadeout;
	//mouse event detection for each control item graphic:
	for (var item in controller) {
		//controller[item].color = Raphael.getColor();
		//controller[item].color = color_over;
		(function (st, item) {
			st[0].style.cursor = "pointer";
			st.translate(0,0);
			st.mousedown(function () {
				if(previous){
					previous.animate({fill: color_off, stroke: color_stroke,"fill-opacity": 0.0, "stroke-opacity": 0.0}, 5);
				}
				st.animate({fill: color_on, stroke: color_stroke, "fill-opacity": 0.5, "stroke-opacity": 0.5}, 5);
				st.toFront();
				selected=item;//the symbol
				previous=st;//the object
				clearTimeout(fadeout); //cancel fadeout
				//log(item);                        
				//$.post("../toserver.jsp", "getid " + item); //this goes to Max/msp
				$.post("../editor_4.html", "getid " + item); //this goes to Max/msp
				//R.safari();
			});
			
			st.mouseover(function () {
				if(current!=selected && item!=last){ //mouseout doesn't work in IE because it SUCKS so I have to clear the one we highlighted before:
					clearTimeout(fadeout);
					current && controller[current].animate({fill: color_off, "fill-opacity": 0.0, "stroke-opacity": 0.0, stroke: color_stroke}, 400);
					//log(" | clear: curr "+current+" sel "+selected);
				}
				if(item!=selected){
					st.animate({fill: color_over, stroke: color_stroke,"fill-opacity": 0.5, "stroke-opacity": 0.5}, 5);
					st.toFront();
					//R.safari();
					current = item;
					//fade out the over after 5 secs
					fadeout = setTimeout(function(){st.animate({fill: color_over, stroke: color_stroke,"fill-opacity": 0, "stroke-opacity": 0}, 500);},4000);
					//log("selected "+selected);
				}
				last=item;//for filter 
				//log(" last "+last+"<br>");
			});
			/* IE SUCKS. 
			st.mouseout(function () {
				if(item!=selected){
					st.animate({fill: color_off, stroke: color_stroke}, 20);
					st.toFront();
					log("out "+item);
					//R.safari();
				};
			});*/
		})(controller[item], item);
	}
	
};